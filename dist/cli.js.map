{"version":3,"sources":["../src/validators/base.ts","../src/validators/string.ts","../src/validators/number.ts","../src/validators/boolean.ts","../src/formatter.ts","../src/schema.ts","../src/cli.ts"],"names":["pc","guardian","errors","count"],"mappings":"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","file":"cli.js","sourcesContent":["import type { ValidationResult, Validator, ValidatorMeta } from \"../types.js\";\n\nexport abstract class BaseValidator<T> implements Validator<T> {\n  readonly _type: string;\n  readonly _required: boolean;\n  readonly _default: unknown;\n  readonly _description: string | undefined;\n\n  constructor(\n    type: string,\n    required = true,\n    defaultValue: unknown = undefined,\n    description: string | undefined = undefined,\n  ) {\n    this._type = type;\n    this._required = required;\n    this._default = defaultValue;\n    this._description = description;\n  }\n\n  abstract parse(raw: string | undefined): ValidationResult<T>;\n\n  optional(): Validator<T | undefined> {\n    return new OptionalWrapper<T>(this);\n  }\n\n  default(value: T): Validator<T> {\n    return new DefaultWrapper<T>(this, value);\n  }\n\n  describe(description: string): Validator<T> {\n    return new DescribedWrapper<T>(this, description);\n  }\n}\n\n// ─── Optional Wrapper ─────────────────────────────────────────────────────────\n\nclass OptionalWrapper<T> extends BaseValidator<T | undefined> {\n  private readonly _inner: Validator<T>;\n\n  constructor(inner: Validator<T>) {\n    super(inner._type, false, undefined, inner._description);\n    this._inner = inner;\n  }\n\n  parse(raw: string | undefined): ValidationResult<T | undefined> {\n    if (raw === undefined || raw === \"\") {\n      return { ok: true, value: undefined };\n    }\n    return this._inner.parse(raw);\n  }\n}\n\n// ─── Default Wrapper ──────────────────────────────────────────────────────────\n\nclass DefaultWrapper<T> extends BaseValidator<T> {\n  private readonly _inner: Validator<T>;\n  private readonly _defaultValue: T;\n\n  constructor(inner: Validator<T>, defaultValue: T) {\n    super(inner._type, false, defaultValue, inner._description);\n    this._inner = inner;\n    this._defaultValue = defaultValue;\n  }\n\n  parse(raw: string | undefined): ValidationResult<T> {\n    if (raw === undefined || raw === \"\") {\n      return { ok: true, value: this._defaultValue };\n    }\n    return this._inner.parse(raw);\n  }\n}\n\n// ─── Described Wrapper ────────────────────────────────────────────────────────\n\nclass DescribedWrapper<T> extends BaseValidator<T> {\n  private readonly _inner: Validator<T>;\n\n  constructor(inner: Validator<T>, description: string) {\n    super(inner._type, inner._required, inner._default, description);\n    this._inner = inner;\n  }\n\n  parse(raw: string | undefined): ValidationResult<T> {\n    return this._inner.parse(raw);\n  }\n}\n\n// ─── Custom Validator ─────────────────────────────────────────────────────────\n\nexport class CustomValidator<T> extends BaseValidator<T> {\n  private readonly _fn: (raw: string) => ValidationResult<T>;\n\n  constructor(\n    fn: (raw: string) => ValidationResult<T>,\n    typeName = \"custom\",\n  ) {\n    super(typeName, true);\n    this._fn = fn;\n  }\n\n  parse(raw: string | undefined): ValidationResult<T> {\n    if (raw === undefined || raw === \"\") {\n      return { ok: false, error: \"Value is required\" };\n    }\n    return this._fn(raw);\n  }\n}\n\nexport function isValidatorMeta(value: unknown): value is ValidatorMeta {\n  return (\n    typeof value === \"object\" &&\n    value !== null &&\n    \"_type\" in value &&\n    \"_required\" in value\n  );\n}\n","import type { ValidationResult } from \"../types.js\";\nimport { BaseValidator } from \"./base.js\";\n\nexport class StringValidator extends BaseValidator<string> {\n  private readonly _minLength: number | undefined;\n  private readonly _maxLength: number | undefined;\n  private readonly _pattern: RegExp | undefined;\n\n  constructor(\n    options: {\n      minLength?: number | undefined;\n      maxLength?: number | undefined;\n      pattern?: RegExp | undefined;\n      required?: boolean | undefined;\n      defaultValue?: string | undefined;\n      description?: string | undefined;\n    } = {},\n  ) {\n    super(\"string\", options.required ?? true, options.defaultValue, options.description);\n    this._minLength = options.minLength;\n    this._maxLength = options.maxLength;\n    this._pattern = options.pattern;\n  }\n\n  parse(raw: string | undefined): ValidationResult<string> {\n    if (raw === undefined || raw === \"\") {\n      return { ok: false, error: \"Value is required\" };\n    }\n\n    if (this._minLength !== undefined && raw.length < this._minLength) {\n      return {\n        ok: false,\n        error: `Must be at least ${this._minLength} characters long (got ${raw.length})`,\n      };\n    }\n\n    if (this._maxLength !== undefined && raw.length > this._maxLength) {\n      return {\n        ok: false,\n        error: `Must be at most ${this._maxLength} characters long (got ${raw.length})`,\n      };\n    }\n\n    if (this._pattern !== undefined && !this._pattern.test(raw)) {\n      return {\n        ok: false,\n        error: `Must match pattern ${this._pattern.toString()}`,\n      };\n    }\n\n    return { ok: true, value: raw };\n  }\n\n  min(length: number): StringValidator {\n    const opts: ConstructorParameters<typeof StringValidator>[0] = { minLength: length };\n    if (this._maxLength !== undefined) opts.maxLength = this._maxLength;\n    if (this._pattern !== undefined) opts.pattern = this._pattern;\n    if (this._description !== undefined) opts.description = this._description;\n    return new StringValidator(opts);\n  }\n\n  max(length: number): StringValidator {\n    const opts: ConstructorParameters<typeof StringValidator>[0] = { maxLength: length };\n    if (this._minLength !== undefined) opts.minLength = this._minLength;\n    if (this._pattern !== undefined) opts.pattern = this._pattern;\n    if (this._description !== undefined) opts.description = this._description;\n    return new StringValidator(opts);\n  }\n\n  matches(pattern: RegExp): StringValidator {\n    const opts: ConstructorParameters<typeof StringValidator>[0] = { pattern };\n    if (this._minLength !== undefined) opts.minLength = this._minLength;\n    if (this._maxLength !== undefined) opts.maxLength = this._maxLength;\n    if (this._description !== undefined) opts.description = this._description;\n    return new StringValidator(opts);\n  }\n}\n\nexport function string(): StringValidator {\n  return new StringValidator();\n}\n","import type { ValidationResult } from \"../types.js\";\nimport { BaseValidator } from \"./base.js\";\n\nexport class NumberValidator extends BaseValidator<number> {\n  private readonly _min: number | undefined;\n  private readonly _max: number | undefined;\n  private readonly _integer: boolean;\n\n  constructor(\n    options: {\n      min?: number | undefined;\n      max?: number | undefined;\n      integer?: boolean | undefined;\n      required?: boolean | undefined;\n      defaultValue?: number | undefined;\n      description?: string | undefined;\n    } = {},\n  ) {\n    super(\"number\", options.required ?? true, options.defaultValue, options.description);\n    this._min = options.min;\n    this._max = options.max;\n    this._integer = options.integer ?? false;\n  }\n\n  parse(raw: string | undefined): ValidationResult<number> {\n    if (raw === undefined || raw === \"\") {\n      return { ok: false, error: \"Value is required\" };\n    }\n\n    const parsed = Number(raw);\n\n    if (isNaN(parsed) || raw.trim() === \"\") {\n      return {\n        ok: false,\n        error: `Expected a number, got \"${raw}\"`,\n      };\n    }\n\n    if (this._integer && !Number.isInteger(parsed)) {\n      return {\n        ok: false,\n        error: `Expected an integer, got \"${raw}\"`,\n      };\n    }\n\n    if (this._min !== undefined && parsed < this._min) {\n      return {\n        ok: false,\n        error: `Must be at least ${this._min} (got ${parsed})`,\n      };\n    }\n\n    if (this._max !== undefined && parsed > this._max) {\n      return {\n        ok: false,\n        error: `Must be at most ${this._max} (got ${parsed})`,\n      };\n    }\n\n    return { ok: true, value: parsed };\n  }\n\n  min(value: number): NumberValidator {\n    const opts: ConstructorParameters<typeof NumberValidator>[0] = { min: value, integer: this._integer };\n    if (this._max !== undefined) opts.max = this._max;\n    if (this._description !== undefined) opts.description = this._description;\n    return new NumberValidator(opts);\n  }\n\n  max(value: number): NumberValidator {\n    const opts: ConstructorParameters<typeof NumberValidator>[0] = { max: value, integer: this._integer };\n    if (this._min !== undefined) opts.min = this._min;\n    if (this._description !== undefined) opts.description = this._description;\n    return new NumberValidator(opts);\n  }\n\n  int(): NumberValidator {\n    const opts: ConstructorParameters<typeof NumberValidator>[0] = { integer: true };\n    if (this._min !== undefined) opts.min = this._min;\n    if (this._max !== undefined) opts.max = this._max;\n    if (this._description !== undefined) opts.description = this._description;\n    return new NumberValidator(opts);\n  }\n\n  port(): NumberValidator {\n    const opts: ConstructorParameters<typeof NumberValidator>[0] = { min: 1, max: 65535, integer: true };\n    if (this._description !== undefined) opts.description = this._description;\n    return new NumberValidator(opts);\n  }\n}\n\nexport function number(): NumberValidator {\n  return new NumberValidator();\n}\n","import type { ValidationResult } from \"../types.js\";\nimport { BaseValidator } from \"./base.js\";\n\nconst TRUTHY = new Set([\"true\", \"1\", \"yes\", \"on\"]);\nconst FALSY = new Set([\"false\", \"0\", \"no\", \"off\"]);\n\nexport class BooleanValidator extends BaseValidator<boolean> {\n  constructor(\n    options: {\n      required?: boolean;\n      defaultValue?: boolean;\n      description?: string;\n    } = {},\n  ) {\n    super(\"boolean\", options.required ?? true, options.defaultValue, options.description);\n  }\n\n  parse(raw: string | undefined): ValidationResult<boolean> {\n    if (raw === undefined || raw === \"\") {\n      return { ok: false, error: \"Value is required\" };\n    }\n\n    const normalized = raw.toLowerCase().trim();\n\n    if (TRUTHY.has(normalized)) return { ok: true, value: true };\n    if (FALSY.has(normalized)) return { ok: true, value: false };\n\n    return {\n      ok: false,\n      error: `Expected a boolean (true/false/1/0/yes/no/on/off), got \"${raw}\"`,\n    };\n  }\n}\n\nexport function boolean(): BooleanValidator {\n  return new BooleanValidator();\n}\n","import pc from \"picocolors\";\nimport type { EnvError } from \"./types.js\";\n\nconst ICONS = {\n  missing: \"✖\",\n  invalid_type: \"⚠\",\n  invalid_format: \"⚠\",\n  invalid_value: \"⚠\",\n  success: \"✔\",\n  error: \"✖\",\n} as const;\n\nfunction formatError(err: EnvError): string {\n  const icon = ICONS[err.kind];\n\n  switch (err.kind) {\n    case \"missing\":\n      return `  ${pc.red(icon)} ${pc.bold(pc.red(err.key))} ${pc.dim(\"→\")} ${pc.red(\"missing required variable\")}`;\n\n    case \"invalid_type\":\n      return [\n        `  ${pc.yellow(icon)} ${pc.bold(pc.yellow(err.key))} ${pc.dim(\"→\")} ${pc.yellow(\"invalid type\")}`,\n        err.received !== undefined\n          ? `    ${pc.dim(\"received:\")}  ${pc.white(err.received)}`\n          : \"\",\n        err.expected !== undefined\n          ? `    ${pc.dim(\"expected:\")}  ${pc.cyan(err.expected)}`\n          : \"\",\n        `    ${pc.dim(\"message:\")}   ${pc.white(err.message)}`,\n      ]\n        .filter(Boolean)\n        .join(\"\\n\");\n\n    case \"invalid_format\":\n    case \"invalid_value\":\n      return [\n        `  ${pc.yellow(icon)} ${pc.bold(pc.yellow(err.key))} ${pc.dim(\"→\")} ${pc.yellow(err.kind === \"invalid_format\" ? \"invalid format\" : \"invalid value\")}`,\n        err.received !== undefined\n          ? `    ${pc.dim(\"received:\")}  ${pc.white(err.received)}`\n          : \"\",\n        err.expected !== undefined\n          ? `    ${pc.dim(\"expected:\")}  ${pc.cyan(err.expected)}`\n          : \"\",\n        `    ${pc.dim(\"message:\")}   ${pc.white(err.message)}`,\n      ]\n        .filter(Boolean)\n        .join(\"\\n\");\n  }\n}\n\nexport function formatErrors(errors: EnvError[], source = \"env\"): string {\n  const lines: string[] = [];\n\n  const missing = errors.filter((e) => e.kind === \"missing\");\n  const invalid = errors.filter((e) => e.kind !== \"missing\");\n\n  lines.push(\"\");\n  lines.push(\n    pc.bold(pc.red(`  ${ICONS.error} env-guardian: Validation failed`)) +\n      pc.dim(` (${errors.length} error${errors.length !== 1 ? \"s\" : \"\"})`),\n  );\n  lines.push(pc.dim(`  Source: ${source}`));\n  lines.push(\"\");\n\n  if (missing.length > 0) {\n    lines.push(pc.bold(pc.dim(`  ── Missing Variables (${missing.length}) ──────────────────`)));\n    for (const err of missing) {\n      lines.push(formatError(err));\n    }\n    lines.push(\"\");\n  }\n\n  if (invalid.length > 0) {\n    lines.push(pc.bold(pc.dim(`  ── Invalid Variables (${invalid.length}) ──────────────────`)));\n    for (const err of invalid) {\n      lines.push(formatError(err));\n    }\n    lines.push(\"\");\n  }\n\n  lines.push(pc.dim(\"  ─────────────────────────────────────────────────\"));\n  lines.push(\n    pc.dim(\"  Fix the above errors in your \") +\n      pc.cyan(\".env\") +\n      pc.dim(\" file or environment and restart.\"),\n  );\n  lines.push(\"\");\n\n  return lines.join(\"\\n\");\n}\n\nexport function formatSuccess(count: number, source = \"env\"): string {\n  return [\n    \"\",\n    `  ${pc.green(ICONS.success)} ${pc.bold(pc.green(\"env-guardian: All variables valid\"))} ${pc.dim(`(${count} checked)`)}`,\n    pc.dim(`  Source: ${source}`),\n    \"\",\n  ].join(\"\\n\");\n}\n\nexport class EnvValidationError extends Error {\n  readonly errors: EnvError[];\n\n  constructor(errors: EnvError[], source?: string) {\n    super(`Environment validation failed with ${errors.length} error(s)`);\n    this.name = \"EnvValidationError\";\n    this.errors = errors;\n    // Append formatted output to the error message for non-TTY contexts\n    this.message = formatErrors(errors, source);\n  }\n}\n","import type {\n  EnvError,\n  FlatSchemaShape,\n  GroupSchema,\n  InferSchema,\n  ParseOptions,\n  SchemaShape,\n  Validator,\n} from \"./types.js\";\nimport { isValidatorMeta } from \"./validators/index.js\";\nimport { EnvValidationError, formatErrors, formatSuccess } from \"./formatter.js\";\n\n// ─── Group Builder ────────────────────────────────────────────────────────────\n\nexport interface GroupOptions {\n  /** Env variable prefix to strip from keys (e.g., \"DB_\" → key \"HOST\" reads \"DB_HOST\") */\n  prefix?: string;\n  /** Override schema per NODE_ENV value */\n  envSpecific?: Record<string, FlatSchemaShape>;\n}\n\nexport function group<S extends FlatSchemaShape>(\n  shape: S,\n  options: GroupOptions = {},\n): GroupSchema & { shape: S } {\n  return {\n    _isGroup: true,\n    _prefix: options.prefix ?? undefined,\n    _envSpecific: options.envSpecific ?? undefined,\n    shape,\n  };\n}\n\nfunction isGroupSchema(value: unknown): value is GroupSchema {\n  return (\n    typeof value === \"object\" &&\n    value !== null &&\n    \"_isGroup\" in value &&\n    (value as GroupSchema)._isGroup === true\n  );\n}\n\n// ─── Flat Parser ──────────────────────────────────────────────────────────────\n\nfunction parseFlat(\n  shape: FlatSchemaShape,\n  env: Record<string, string | undefined>,\n  prefix: string,\n  nodeEnv: string | undefined,\n  envSpecific: Record<string, FlatSchemaShape> | undefined,\n): { values: Record<string, unknown>; errors: EnvError[] } {\n  const errors: EnvError[] = [];\n  const values: Record<string, unknown> = {};\n\n  // Merge env-specific overrides for the current NODE_ENV\n  const mergedShape: FlatSchemaShape = { ...shape };\n  if (envSpecific && nodeEnv && nodeEnv in envSpecific) {\n    Object.assign(mergedShape, envSpecific[nodeEnv]);\n  }\n\n  for (const [key, validator] of Object.entries(mergedShape)) {\n    const envKey = prefix ? `${prefix}${key}` : key;\n    const raw = env[envKey];\n    const result = validator.parse(raw);\n\n    if (result.ok) {\n      values[key] = result.value;\n    } else {\n      const kind = raw === undefined || raw === \"\" ? \"missing\" : detectErrorKind(result.error);\n      errors.push({\n        key: envKey,\n        kind,\n        message: result.error,\n        received: raw,\n        expected: validator._type,\n      });\n    }\n  }\n\n  return { values, errors };\n}\n\nfunction detectErrorKind(message: string): EnvError[\"kind\"] {\n  if (message.toLowerCase().includes(\"required\")) return \"missing\";\n  if (message.toLowerCase().includes(\"type\") || message.toLowerCase().includes(\"expected a\")) {\n    return \"invalid_type\";\n  }\n  if (\n    message.toLowerCase().includes(\"url\") ||\n    message.toLowerCase().includes(\"email\") ||\n    message.toLowerCase().includes(\"pattern\")\n  ) {\n    return \"invalid_format\";\n  }\n  return \"invalid_value\";\n}\n\n// ─── EnvGuardian ─────────────────────────────────────────────────────────────\n\nexport class EnvGuardian<S extends SchemaShape> {\n  private readonly _schema: S;\n  private _globalEnvSpecific: Record<string, FlatSchemaShape> | undefined;\n\n  constructor(schema: S) {\n    this._schema = schema;\n  }\n\n  /**\n   * Add top-level environment-specific overrides.\n   * These are applied when the key is directly in the schema (not in a group).\n   */\n  forEnv(envSpecific: Record<string, FlatSchemaShape>): this {\n    this._globalEnvSpecific = envSpecific;\n    return this;\n  }\n\n  /**\n   * Parse and validate environment variables.\n   * Throws `EnvValidationError` on failure.\n   */\n  parse(options: ParseOptions = {}): InferSchema<S> {\n    const env = options.env ?? (process.env as Record<string, string | undefined>);\n    const nodeEnv = options.nodeEnv ?? process.env[\"NODE_ENV\"];\n    const result: Record<string, unknown> = {};\n    const allErrors: EnvError[] = [];\n\n    for (const [key, value] of Object.entries(this._schema)) {\n      if (isGroupSchema(value)) {\n        const { values, errors } = parseFlat(\n          value.shape,\n          env,\n          value._prefix ?? \"\",\n          nodeEnv,\n          value._envSpecific,\n        );\n        result[key] = values;\n        allErrors.push(...errors);\n      } else if (isValidatorMeta(value)) {\n        const validator = value as Validator<unknown>;\n        const raw = env[key];\n        const parseResult = validator.parse(raw);\n\n        if (parseResult.ok) {\n          // Strip type metadata in production if requested\n          if (options.stripTypes) {\n            result[key] = parseResult.value;\n          } else {\n            result[key] = parseResult.value;\n          }\n        } else {\n          const kind = raw === undefined || raw === \"\" ? \"missing\" : detectErrorKind(parseResult.error);\n          allErrors.push({\n            key,\n            kind,\n            message: parseResult.error,\n            received: raw,\n            expected: validator._type,\n          });\n        }\n      }\n    }\n\n    // Apply global env-specific overrides for flat keys\n    if (this._globalEnvSpecific && nodeEnv && nodeEnv in this._globalEnvSpecific) {\n      const overrides = this._globalEnvSpecific[nodeEnv]!;\n      for (const [key, validator] of Object.entries(overrides)) {\n        const raw = env[key];\n        const parseResult = validator.parse(raw);\n\n        if (parseResult.ok) {\n          result[key] = parseResult.value;\n          // Remove prior error for this key if any\n          const idx = allErrors.findIndex((e) => e.key === key);\n          if (idx !== -1) allErrors.splice(idx, 1);\n        } else {\n          const kind = raw === undefined || raw === \"\" ? \"missing\" : detectErrorKind(parseResult.error);\n          const existing = allErrors.find((e) => e.key === key);\n          if (existing) {\n            existing.kind = kind;\n            existing.message = parseResult.error;\n            existing.received = raw;\n            existing.expected = validator._type;\n          } else {\n            allErrors.push({\n              key,\n              kind,\n              message: parseResult.error,\n              received: raw,\n              expected: validator._type,\n            });\n          }\n        }\n      }\n    }\n\n    if (allErrors.length > 0) {\n      throw new EnvValidationError(allErrors);\n    }\n\n    return result as InferSchema<S>;\n  }\n\n  /**\n   * Validate without throwing. Returns errors array or empty array.\n   */\n  validate(options: ParseOptions = {}): EnvError[] {\n    try {\n      this.parse(options);\n      return [];\n    } catch (err) {\n      if (err instanceof EnvValidationError) {\n        return err.errors;\n      }\n      throw err;\n    }\n  }\n\n  /**\n   * Generate a .env.example file content from the schema.\n   */\n  generateExample(\n    options: {\n      comments?: boolean;\n      includeDefaults?: boolean;\n    } = {},\n  ): string {\n    const { comments = true, includeDefaults = true } = options;\n    const lines: string[] = [];\n\n    if (comments) {\n      lines.push(\"# Generated by env-guardian\");\n      lines.push(\"# Fill in the required values before running the application\");\n      lines.push(\"\");\n    }\n\n    for (const [key, value] of Object.entries(this._schema)) {\n      if (isGroupSchema(value)) {\n        if (comments) {\n          lines.push(`# ── ${key} ──`);\n        }\n        for (const [fieldKey, validator] of Object.entries(value.shape)) {\n          const envKey = value._prefix ? `${value._prefix}${fieldKey}` : fieldKey;\n          lines.push(...formatExampleEntry(envKey, validator as Validator<unknown>, { comments, includeDefaults }));\n        }\n        lines.push(\"\");\n      } else if (isValidatorMeta(value)) {\n        lines.push(...formatExampleEntry(key, value as Validator<unknown>, { comments, includeDefaults }));\n      }\n    }\n\n    return lines.join(\"\\n\");\n  }\n\n  /**\n   * Return a plain object describing the schema (useful for documentation generation).\n   */\n  introspect(): SchemaIntrospection {\n    const fields: IntrospectedField[] = [];\n\n    for (const [key, value] of Object.entries(this._schema)) {\n      if (isGroupSchema(value)) {\n        for (const [fieldKey, validator] of Object.entries(value.shape)) {\n          const envKey = value._prefix ? `${value._prefix}${fieldKey}` : fieldKey;\n          fields.push({\n            key: envKey,\n            group: key,\n            type: (validator as Validator<unknown>)._type,\n            required: (validator as Validator<unknown>)._required,\n            default: (validator as Validator<unknown>)._default,\n            description: (validator as Validator<unknown>)._description,\n          });\n        }\n      } else if (isValidatorMeta(value)) {\n        const v = value as Validator<unknown>;\n        fields.push({\n          key,\n          group: undefined,\n          type: v._type,\n          required: v._required,\n          default: v._default,\n          description: v._description,\n        });\n      }\n    }\n\n    return { fields };\n  }\n}\n\n// ─── Introspection Types ──────────────────────────────────────────────────────\n\nexport interface IntrospectedField {\n  key: string;\n  group: string | undefined;\n  type: string;\n  required: boolean;\n  default: unknown;\n  description: string | undefined;\n}\n\nexport interface SchemaIntrospection {\n  fields: IntrospectedField[];\n}\n\n// ─── Helpers ──────────────────────────────────────────────────────────────────\n\nfunction formatExampleEntry(\n  key: string,\n  validator: Validator<unknown>,\n  options: { comments: boolean; includeDefaults: boolean },\n): string[] {\n  const lines: string[] = [];\n\n  if (options.comments && validator._description) {\n    lines.push(`# ${validator._description}`);\n  }\n\n  if (options.comments) {\n    const meta: string[] = [`type: ${validator._type}`];\n    if (!validator._required) meta.push(\"optional\");\n    if (validator._default !== undefined) meta.push(`default: ${String(validator._default)}`);\n    lines.push(`# ${meta.join(\" | \")}`);\n  }\n\n  const defaultVal =\n    options.includeDefaults && validator._default !== undefined\n      ? String(validator._default)\n      : \"\";\n\n  lines.push(`${key}=${defaultVal}`);\n  return lines;\n}\n\n// ─── Top-level API ────────────────────────────────────────────────────────────\n\n/**\n * Define an environment variable schema.\n *\n * @example\n * const env = defineEnv({\n *   PORT: number().default(3000),\n *   DATABASE_URL: url(),\n *   NODE_ENV: enumValidator([\"development\", \"production\"]),\n * });\n *\n * export const config = env.parse();\n */\nexport function defineEnv<S extends SchemaShape>(schema: S): EnvGuardian<S> {\n  return new EnvGuardian(schema);\n}\n\n/**\n * Quick one-shot parse — define schema and parse immediately.\n * Equivalent to `defineEnv(schema).parse(options)`.\n */\nexport function parseEnv<S extends SchemaShape>(\n  schema: S,\n  options?: ParseOptions,\n): InferSchema<S> {\n  return defineEnv(schema).parse(options);\n}\n\n/**\n * Print formatted validation errors to stderr.\n * Returns true if all valid, false if errors found.\n */\nexport function checkEnv<S extends SchemaShape>(\n  guard: EnvGuardian<S>,\n  options: ParseOptions & { source?: string } = {},\n): boolean {\n  const errors = guard.validate(options);\n  const { fields } = guard.introspect();\n\n  if (errors.length > 0) {\n    process.stderr.write(formatErrors(errors, options.source ?? \"process.env\"));\n    return false;\n  }\n\n  process.stdout.write(formatSuccess(fields.length, options.source ?? \"process.env\"));\n  return true;\n}\n","import { readFileSync, writeFileSync, existsSync } from \"node:fs\";\nimport { resolve, basename } from \"node:path\";\nimport pc from \"picocolors\";\nimport type { FlatSchemaShape } from \"./types.js\";\nimport { defineEnv } from \"./schema.js\";\nimport { formatErrors, formatSuccess } from \"./formatter.js\";\nimport { string } from \"./validators/string.js\";\nimport { number } from \"./validators/number.js\";\nimport { boolean } from \"./validators/boolean.js\";\n\n// ─── .env Parser ─────────────────────────────────────────────────────────────\n\nfunction parseDotEnv(content: string): Record<string, string> {\n  const result: Record<string, string> = {};\n  const lines = content.split(\"\\n\");\n\n  for (const rawLine of lines) {\n    const line = rawLine.trim();\n\n    // Skip comments and empty lines\n    if (!line || line.startsWith(\"#\")) continue;\n\n    const eqIdx = line.indexOf(\"=\");\n    if (eqIdx === -1) continue;\n\n    const key = line.slice(0, eqIdx).trim();\n    let value = line.slice(eqIdx + 1).trim();\n\n    // Strip surrounding quotes\n    if (\n      (value.startsWith('\"') && value.endsWith('\"')) ||\n      (value.startsWith(\"'\") && value.endsWith(\"'\"))\n    ) {\n      value = value.slice(1, -1);\n    }\n\n    if (key) {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n\n// ─── Schema Loader ────────────────────────────────────────────────────────────\n\nasync function loadSchemaFile(schemaPath: string): Promise<FlatSchemaShape | null> {\n  if (!existsSync(schemaPath)) return null;\n\n  try {\n    const mod = await import(schemaPath) as { default?: unknown; schema?: unknown };\n    const schema = mod.default ?? mod.schema;\n\n    if (typeof schema !== \"object\" || schema === null) {\n      return null;\n    }\n\n    // Check if it's an EnvGuardian instance\n    if (\n      \"parse\" in schema &&\n      \"validate\" in schema &&\n      typeof (schema as { validate: unknown }).validate === \"function\"\n    ) {\n      return schema as unknown as FlatSchemaShape;\n    }\n\n    return schema as FlatSchemaShape;\n  } catch {\n    return null;\n  }\n}\n\n// ─── Infer schema from .env file ─────────────────────────────────────────────\n\nfunction inferSchemaFromEnv(env: Record<string, string>): FlatSchemaShape {\n  const schema: FlatSchemaShape = {};\n\n  for (const [key, value] of Object.entries(env)) {\n    if (value === \"true\" || value === \"false\") {\n      schema[key] = boolean().optional();\n    } else if (!isNaN(Number(value)) && value !== \"\") {\n      schema[key] = number().optional();\n    } else {\n      schema[key] = string().optional();\n    }\n  }\n\n  return schema;\n}\n\n// ─── CLI Commands ─────────────────────────────────────────────────────────────\n\nfunction printHelp(): void {\n  console.log(`\n${pc.bold(pc.cyan(\"env-guardian\"))} ${pc.dim(\"— TypeScript-first environment validator\")}\n\n${pc.bold(\"Usage:\")}\n  ${pc.cyan(\"npx env-guardian\")} ${pc.yellow(\"<command>\")} ${pc.dim(\"[options]\")}\n\n${pc.bold(\"Commands:\")}\n  ${pc.yellow(\"check\")}           Validate .env file against schema\n  ${pc.yellow(\"generate\")}        Generate a .env.example from schema or .env file\n  ${pc.yellow(\"inspect\")}         Show schema introspection table\n  ${pc.yellow(\"help\")}            Show this help message\n\n${pc.bold(\"Options:\")}\n  ${pc.dim(\"--env\")}           Path to .env file ${pc.dim(\"(default: .env)\")}\n  ${pc.dim(\"--schema\")}        Path to schema file ${pc.dim(\"(default: env.schema.ts / env.schema.js)\")}\n  ${pc.dim(\"--output\")}        Output file for generate command ${pc.dim(\"(default: .env.example)\")}\n  ${pc.dim(\"--no-comments\")}   Omit comments in generated file\n  ${pc.dim(\"--node-env\")}      Override NODE_ENV for env-specific validation\n\n${pc.bold(\"Examples:\")}\n  ${pc.dim(\"npx env-guardian check\")}\n  ${pc.dim(\"npx env-guardian check --env .env.production --schema env.schema.js\")}\n  ${pc.dim(\"npx env-guardian generate --output .env.example\")}\n  ${pc.dim(\"npx env-guardian inspect\")}\n`);\n}\n\ninterface CliArgs {\n  command: string;\n  envFile: string;\n  schemaFile: string;\n  outputFile: string;\n  noComments: boolean;\n  nodeEnv: string | undefined;\n}\n\nfunction parseArgs(argv: string[]): CliArgs {\n  const args = argv.slice(2);\n  const result: CliArgs = {\n    command: \"check\",\n    envFile: \".env\",\n    schemaFile: \"\",\n    outputFile: \".env.example\",\n    noComments: false,\n    nodeEnv: undefined,\n  };\n\n  let i = 0;\n  while (i < args.length) {\n    const arg = args[i];\n\n    if (!arg) { i++; continue; }\n\n    if (!arg.startsWith(\"--\")) {\n      result.command = arg;\n    } else if (arg === \"--env\" && args[i + 1]) {\n      result.envFile = args[++i] ?? result.envFile;\n    } else if (arg === \"--schema\" && args[i + 1]) {\n      result.schemaFile = args[++i] ?? result.schemaFile;\n    } else if (arg === \"--output\" && args[i + 1]) {\n      result.outputFile = args[++i] ?? result.outputFile;\n    } else if (arg === \"--no-comments\") {\n      result.noComments = true;\n    } else if (arg === \"--node-env\" && args[i + 1]) {\n      const next = args[++i];\n      if (next !== undefined) result.nodeEnv = next;\n    }\n\n    i++;\n  }\n\n  return result;\n}\n\n// ─── Command: check ───────────────────────────────────────────────────────────\n\nasync function commandCheck(args: CliArgs): Promise<void> {\n  const envPath = resolve(process.cwd(), args.envFile);\n\n  if (!existsSync(envPath)) {\n    console.error(\n      `\\n  ${pc.red(\"✖\")} ${pc.bold(pc.red(\"File not found:\"))} ${pc.cyan(args.envFile)}\\n`,\n    );\n    process.exit(1);\n  }\n\n  const envContent = readFileSync(envPath, \"utf8\");\n  const envVars = parseDotEnv(envContent);\n  const source = basename(envPath);\n\n  // Try to load schema file\n  const schemaSearchPaths = args.schemaFile\n    ? [resolve(process.cwd(), args.schemaFile)]\n    : [\n        resolve(process.cwd(), \"env.schema.ts\"),\n        resolve(process.cwd(), \"env.schema.js\"),\n        resolve(process.cwd(), \"env.schema.mjs\"),\n        resolve(process.cwd(), \"env.config.ts\"),\n        resolve(process.cwd(), \"env.config.js\"),\n      ];\n\n  let schemaLoaded = false;\n\n  for (const schemaPath of schemaSearchPaths) {\n    const loaded = await loadSchemaFile(schemaPath);\n\n    if (loaded) {\n      schemaLoaded = true;\n\n      // If it's an EnvGuardian instance\n      if (\"validate\" in loaded && typeof (loaded as { validate: unknown }).validate === \"function\") {\n        const guardian = loaded as unknown as { validate: (opts: object) => unknown[] };\n        const errors = guardian.validate({\n          env: envVars,\n          nodeEnv: args.nodeEnv,\n        }) as Array<{ key: string; kind: string; message: string; received?: string; expected?: string }>;\n\n        if (errors.length > 0) {\n          process.stderr.write(formatErrors(errors as Parameters<typeof formatErrors>[0], source));\n          process.exit(1);\n        }\n\n        const count = Object.keys(envVars).length;\n        process.stdout.write(formatSuccess(count, source));\n        return;\n      }\n\n      // Otherwise treat as raw FlatSchemaShape\n      const guardian = defineEnv(loaded);\n      const parseOpts = args.nodeEnv !== undefined\n        ? { env: envVars, nodeEnv: args.nodeEnv }\n        : { env: envVars };\n      const errors = guardian.validate(parseOpts);\n\n      if (errors.length > 0) {\n        process.stderr.write(formatErrors(errors, source));\n        process.exit(1);\n      }\n\n      const count = Object.keys(envVars).length;\n      process.stdout.write(formatSuccess(count, source));\n      return;\n    }\n  }\n\n  if (!schemaLoaded) {\n    // No schema found — validate that .env is parseable and show the keys\n    const count = Object.keys(envVars).length;\n    console.log(\n      `\\n  ${pc.yellow(\"⚠\")} ${pc.bold(pc.yellow(\"No schema file found.\"))} Validating .env syntax only.\\n` +\n      `  ${pc.dim(\"Create env.schema.ts or pass --schema to enable full validation.\")}\\n`,\n    );\n    process.stdout.write(formatSuccess(count, source));\n  }\n}\n\n// ─── Command: generate ────────────────────────────────────────────────────────\n\nasync function commandGenerate(args: CliArgs): Promise<void> {\n  const schemaSearchPaths = args.schemaFile\n    ? [resolve(process.cwd(), args.schemaFile)]\n    : [\n        resolve(process.cwd(), \"env.schema.ts\"),\n        resolve(process.cwd(), \"env.schema.js\"),\n        resolve(process.cwd(), \"env.schema.mjs\"),\n        resolve(process.cwd(), \"env.config.ts\"),\n        resolve(process.cwd(), \"env.config.js\"),\n      ];\n\n  for (const schemaPath of schemaSearchPaths) {\n    const loaded = await loadSchemaFile(schemaPath);\n    if (!loaded) continue;\n\n    let content: string;\n\n    if (\"generateExample\" in loaded && typeof (loaded as { generateExample: unknown }).generateExample === \"function\") {\n      const guardian = loaded as unknown as { generateExample: (opts: object) => string };\n      content = guardian.generateExample({ comments: !args.noComments });\n    } else {\n      const guardian = defineEnv(loaded);\n      content = guardian.generateExample({ comments: !args.noComments });\n    }\n\n    const outputPath = resolve(process.cwd(), args.outputFile);\n    writeFileSync(outputPath, content, \"utf8\");\n\n    console.log(\n      `\\n  ${pc.green(\"✔\")} ${pc.bold(pc.green(\"Generated\"))} ${pc.cyan(args.outputFile)}\\n`,\n    );\n    return;\n  }\n\n  // No schema — generate from existing .env\n  const envPath = resolve(process.cwd(), args.envFile);\n  if (existsSync(envPath)) {\n    const envContent = readFileSync(envPath, \"utf8\");\n    const envVars = parseDotEnv(envContent);\n    const inferredSchema = inferSchemaFromEnv(envVars);\n    const guardian = defineEnv(inferredSchema);\n    const content = guardian.generateExample({ comments: !args.noComments });\n    const outputPath = resolve(process.cwd(), args.outputFile);\n    writeFileSync(outputPath, content, \"utf8\");\n    console.log(\n      `\\n  ${pc.green(\"✔\")} ${pc.bold(pc.green(\"Generated\"))} ${pc.cyan(args.outputFile)} ${pc.dim(\"(inferred from .env)\")}\\n`,\n    );\n    return;\n  }\n\n  console.error(\n    `\\n  ${pc.red(\"✖\")} ${pc.bold(pc.red(\"No schema or .env file found.\"))} Cannot generate .env.example.\\n`,\n  );\n  process.exit(1);\n}\n\n// ─── Command: inspect ─────────────────────────────────────────────────────────\n\nasync function commandInspect(args: CliArgs): Promise<void> {\n  const schemaSearchPaths = args.schemaFile\n    ? [resolve(process.cwd(), args.schemaFile)]\n    : [\n        resolve(process.cwd(), \"env.schema.ts\"),\n        resolve(process.cwd(), \"env.schema.js\"),\n        resolve(process.cwd(), \"env.schema.mjs\"),\n      ];\n\n  for (const schemaPath of schemaSearchPaths) {\n    const loaded = await loadSchemaFile(schemaPath);\n    if (!loaded) continue;\n\n    let fields: Array<{ key: string; group: string | undefined; type: string; required: boolean; default: unknown; description: string | undefined }>;\n\n    if (\"introspect\" in loaded && typeof (loaded as { introspect: unknown }).introspect === \"function\") {\n      const guardian = loaded as unknown as { introspect: () => { fields: typeof fields } };\n      fields = guardian.introspect().fields;\n    } else {\n      const guardian = defineEnv(loaded);\n      fields = guardian.introspect().fields;\n    }\n\n    const colW = { key: 30, type: 24, req: 9, def: 20 };\n\n    const header =\n      pc.bold(pc.dim(\" KEY\".padEnd(colW.key))) +\n      pc.bold(pc.dim(\"TYPE\".padEnd(colW.type))) +\n      pc.bold(pc.dim(\"REQ\".padEnd(colW.req))) +\n      pc.bold(pc.dim(\"DEFAULT\".padEnd(colW.def))) +\n      pc.bold(pc.dim(\"DESCRIPTION\"));\n\n    console.log(`\\n  ${pc.bold(pc.cyan(\"Schema Inspection\"))}\\n`);\n    console.log(`  ${header}`);\n    console.log(`  ${pc.dim(\"─\".repeat(90))}`);\n\n    for (const f of fields) {\n      const key = (f.group ? `${pc.dim(f.group + \".\")}${f.key}` : f.key).padEnd(colW.key);\n      const type = pc.cyan(f.type).padEnd(colW.type + 9);\n      const req = (f.required ? pc.red(\"yes\") : pc.green(\"no\")).padEnd(colW.req + 9);\n      const def = (f.default !== undefined ? pc.dim(String(f.default)) : pc.dim(\"—\")).padEnd(colW.def + 9);\n      const desc = pc.dim(f.description ?? \"\");\n      console.log(`  ${key}${type}${req}${def}${desc}`);\n    }\n\n    console.log(`  ${pc.dim(\"─\".repeat(90))}\\n`);\n    return;\n  }\n\n  console.error(\n    `\\n  ${pc.red(\"✖\")} ${pc.bold(pc.red(\"No schema file found.\"))} Pass ${pc.cyan(\"--schema\")} to specify one.\\n`,\n  );\n  process.exit(1);\n}\n\n// ─── Entry Point ──────────────────────────────────────────────────────────────\n\nasync function main(): Promise<void> {\n  const args = parseArgs(process.argv);\n\n  switch (args.command) {\n    case \"check\":\n      await commandCheck(args);\n      break;\n    case \"generate\":\n      await commandGenerate(args);\n      break;\n    case \"inspect\":\n      await commandInspect(args);\n      break;\n    case \"help\":\n    case \"--help\":\n    case \"-h\":\n      printHelp();\n      break;\n    default:\n      console.error(`\\n  ${pc.red(\"✖\")} Unknown command: ${pc.cyan(args.command)}\\n`);\n      printHelp();\n      process.exit(1);\n  }\n}\n\nmain().catch((err: unknown) => {\n  console.error(pc.red(String(err)));\n  process.exit(1);\n});\n"]}